# 卡牌对战游戏

一个基于Python的策略卡牌对战游戏，支持双人对战和AI对战。

## 游戏特色

### 📋 重构优化
- **YAML配置支持**：角色和行动卡数据存储在独立的YAML文件中，便于修改和扩展
- **数据加载器**：统一的数据管理系统，支持从配置文件动态加载游戏内容
- **优化交互**：简化的用户界面，只在回合开始时询问行动选择
- **模块化设计**：清晰的代码结构，便于维护和扩展

### 🎮 游戏机制

#### 基础规则
- 双方各选择2张人物卡组成队伍
- 人物卡初始生命值为15点，生命值为0时倒下
- 每回合抽取3张行动卡
- 率先击倒对方所有角色的队伍获胜

#### 牌库系统
- 初始牌库包含30张行动卡：攻击×10、回血×10、防御×10
- 使用后的卡牌进入弃牌堆
- 牌库用完时重新洗混弃牌堆

### 🎯 行动卡类型

| 卡牌 | 效果 | 目标 |
|------|------|------|
| 攻击 | 减少对方3点生命值 | 敌方角色 |
| 回血 | 增加自身2点生命值 | 己方角色 |
| 防御 | 下次受伤减少1点 | 己方角色 |

### 👤 人物角色

#### 1. Cafe
- **特殊技能**：每回合第一次造成伤害时伤害+1
- **策略定位**：攻击型角色，适合先手压制

#### 2. 星河
- **特殊技能**：每回合不使用技能时抽取1张行动卡
- **策略定位**：资源型角色，提供卡牌优势

#### 3. 阳光
- **特殊技能**：对方上回合未使用攻击卡时，本回合额外抽取2张卡
- **策略定位**：控制型角色，奖励和平策略

#### 4. 琉璃
- **特殊技能**：受到攻击时进行1-6随机判定，6时免疫攻击并反击2点
- **策略定位**：运气型角色，具有反击能力

#### 5. 俊
- **特殊技能**：
  - 可以代替队友承受伤害（每回合限一次）
  - 每回合前两次受到的伤害减少1点
- **策略定位**：防御型角色，保护队友

### ⚡ 特殊队伍效果

#### 俊+琉璃组合
- **效果**：每回合第一次攻击伤害+1
- **策略**：攻守兼备的强力组合

#### Cafe+星河组合
- **效果**：每回合额外抽取2张卡
- **策略**：资源优势组合，手牌充足

#### 阳光+琉璃组合
- **效果**：免除每回合第一次受到的伤害
- **策略**：极强的生存能力

## 🚀 如何开始

### 运行游戏
```bash
python main_optimized.py
```

### 游戏流程
1. **选择模式**：双人对战 或 对战AI
2. **角色选择**：每方选择2个角色组成队伍
3. **战斗阶段**：
   - 随机决定先手
   - 每回合抽取3张卡（含队伍效果加成）
   - 使用行动卡进行攻击、回血或防御
   - 回合结束时处理特殊技能效果
4. **胜利条件**：击倒对方所有角色

### 优化交互特性
- **连续出牌**：不再每次询问是否继续，可连续使用多张卡牌
- **简化提示**：减少冗余信息，专注于战斗核心
- **状态显示**：清晰显示角色血量和手牌情况

## 📁 文件结构

```
Game/
├── main_optimized.py          # 主游戏文件（优化版）
├── game_base.py              # 游戏基础类
├── game_engine.py            # 游戏引擎和AI
├── simple_data_loader.py     # 简化数据加载器
├── characters.yaml           # 角色配置文件
├── action_cards.yaml         # 行动卡配置文件
└── README.md                 # 说明文档
```

## 🔧 技术特点

### 设计模式
- **数据驱动**：使用YAML/代码配置分离数据和逻辑
- **策略模式**：AI决策系统可扩展
- **工厂模式**：角色和卡牌的动态创建

### 扩展性
- 新增角色：在配置文件中添加角色定义
- 新增行动卡：在配置文件中添加卡牌类型
- 新增技能：扩展技能效果处理系统

### 兼容性
- 保留原有枚举类型，确保向后兼容
- 支持YAML配置（需要PyYAML）和内嵌配置两种模式

## 🎯 游戏策略

### 队伍搭配建议
- **新手推荐**：Cafe + 星河（攻击 + 资源）
- **防守流**：俊 + 阳光（保护 + 控制）
- **运气流**：琉璃 + 阳光（反击 + 生存）
- **暴力流**：俊 + 琉璃（攻击 + 防御）

### 战术要点
1. **合理分配**：平衡攻击、防御和回血卡的使用
2. **技能配合**：充分利用角色特殊技能和队伍效果
3. **血量管理**：及时回血，避免角色被击倒
4. **时机把握**：选择合适的攻击和防御时机

## 🐛 已知问题

- AI决策相对简单，可进一步优化
- 部分技能效果的平衡性有待调整

## 🔮 未来计划

- [ ] 更多角色和技能
- [ ] 更强的AI算法
- [ ] 图形化界面
- [ ] 网络对战功能
- [ ] 战斗回放系统

---

**享受游戏！**